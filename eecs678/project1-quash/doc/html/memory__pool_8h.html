<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Quash Shell: src/parsing/memory_pool.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Quash Shell
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">A simple yet powerfull shell program</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_3fb67633942bd84f7aa391e58ba835b3.html">parsing</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">memory_pool.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>An abstraction of malloc that allows for all allocations in the pool to be free'd with a single call to <a class="el" href="memory__pool_8h.html#a2a8f807565226a955c94a2c4670ba65f" title="Free all memory allocated in the memory pool. ">destroy_memory_pool()</a>. Allocations to the memory pool should NOT be manually free'd with a call to free().  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="deque_8h_source.html">deque.h</a>&quot;</code><br />
</div>
<p><a href="memory__pool_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1856c82f260a610e5036434162f5bcb0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory__pool_8h.html#a1856c82f260a610e5036434162f5bcb0">IMPLEMENT_DEQUE_MEMORY_POOL</a>(struct_name,  type)                                </td></tr>
<tr class="memdesc:a1856c82f260a610e5036434162f5bcb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a <em><a class="el" href="memory__pool_8h.html#a609473bc6afff33d360a8e0c8935812e" title="Reserve some space in the memory pool and returns a unique address that can be written to and read fr...">memory_pool_alloc()</a></em> based set of functions for use with a structure generated by <em>IMPLEMENT_DEQUE_STRUCT</em>.  <a href="#a1856c82f260a610e5036434162f5bcb0">More...</a><br /></td></tr>
<tr class="separator:a1856c82f260a610e5036434162f5bcb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1ad04a8d891de237fc5d91191c569777"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory__pool_8h.html#a1ad04a8d891de237fc5d91191c569777">initialize_memory_pool</a> (size_t size)</td></tr>
<tr class="memdesc:a1ad04a8d891de237fc5d91191c569777"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate the memory pool.  <a href="#a1ad04a8d891de237fc5d91191c569777">More...</a><br /></td></tr>
<tr class="separator:a1ad04a8d891de237fc5d91191c569777"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a609473bc6afff33d360a8e0c8935812e"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory__pool_8h.html#a609473bc6afff33d360a8e0c8935812e">memory_pool_alloc</a> (size_t size)</td></tr>
<tr class="memdesc:a609473bc6afff33d360a8e0c8935812e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reserve some space in the memory pool and returns a unique address that can be written to and read from. This can be thought of exactly like malloc() without the requirement of calling free() directly on the returned pointer.  <a href="#a609473bc6afff33d360a8e0c8935812e">More...</a><br /></td></tr>
<tr class="separator:a609473bc6afff33d360a8e0c8935812e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a8f807565226a955c94a2c4670ba65f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2a8f807565226a955c94a2c4670ba65f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory__pool_8h.html#a2a8f807565226a955c94a2c4670ba65f">destroy_memory_pool</a> ()</td></tr>
<tr class="memdesc:a2a8f807565226a955c94a2c4670ba65f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free all memory allocated in the memory pool. <br /></td></tr>
<tr class="separator:a2a8f807565226a955c94a2c4670ba65f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d92ccd7e51eb71624f07b4e917869aa"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory__pool_8h.html#a7d92ccd7e51eb71624f07b4e917869aa">memory_pool_strdup</a> (const char *str)</td></tr>
<tr class="memdesc:a7d92ccd7e51eb71624f07b4e917869aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">A version of strdup() that allocates the duplicate to the memory pool rather than with malloc directly.  <a href="#a7d92ccd7e51eb71624f07b4e917869aa">More...</a><br /></td></tr>
<tr class="separator:a7d92ccd7e51eb71624f07b4e917869aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An abstraction of malloc that allows for all allocations in the pool to be free'd with a single call to <a class="el" href="memory__pool_8h.html#a2a8f807565226a955c94a2c4670ba65f" title="Free all memory allocated in the memory pool. ">destroy_memory_pool()</a>. Allocations to the memory pool should NOT be manually free'd with a call to free(). </p>
<dl class="section warning"><dt>Warning</dt><dd>FOR THE QUASH PROJECT, DO NOT USE OR COPY ANY OF THESE FUNCTIONS YOURSELF. This is a simple garbage collector to fix memory leak problems resulting from the parser, generated by bison, encountering syntax errors in the input that would be very difficult or impossible to fix without this mechanism. Generally, hand crafted c code should be able to manage it's heap allocations directly with malloc and free. We would like for you to become comfortable with malloc based memory management. YOU WILL BE PENALIZED FOR USING ANYTHING IN THIS FILE TO HIDE MEMORY LEAKS.</dd>
<dd>
The memory pool allocations are not thread safe </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a1856c82f260a610e5036434162f5bcb0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMPLEMENT_DEQUE_MEMORY_POOL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">struct_name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates a <em><a class="el" href="memory__pool_8h.html#a609473bc6afff33d360a8e0c8935812e" title="Reserve some space in the memory pool and returns a unique address that can be written to and read fr...">memory_pool_alloc()</a></em> based set of functions for use with a structure generated by <em>IMPLEMENT_DEQUE_STRUCT</em>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">struct_name</td><td>The name of the structure</td></tr>
    <tr><td class="paramname">type</td><td>The name of the type of elements stored in the <em>struct_name</em> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="deque_8h.html#ad1734634a88d702478c08e26e39dc7b8" title="Generates a structure for use with Double Ended Queues. ">IMPLEMENT_DEQUE_STRUCT</a>, <a class="el" href="deque_8h.html#a20e8006e6767304fca356f057bc319f4" title="Generates prototypes for functions that manipulate Double Ended Queue structures. ...">PROTOTYPE_DEQUE</a>, <a class="el" href="memory__pool_8h.html#a1856c82f260a610e5036434162f5bcb0" title="Generates a memory_pool_alloc() based set of functions for use with a structure generated by IMPLEMEN...">IMPLEMENT_DEQUE_MEMORY_POOL</a>, <a class="el" href="memory__pool_8h.html#a609473bc6afff33d360a8e0c8935812e" title="Reserve some space in the memory pool and returns a unique address that can be written to and read fr...">memory_pool_alloc()</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a1ad04a8d891de237fc5d91191c569777"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize_memory_pool </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate the memory pool. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>The initial size of the memory pool. If this value is zero then a default size of one is used. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a609473bc6afff33d360a8e0c8935812e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* memory_pool_alloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reserve some space in the memory pool and returns a unique address that can be written to and read from. This can be thought of exactly like malloc() without the requirement of calling free() directly on the returned pointer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>Size in bytes of the requested reserved space</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to a unique array of size bytes </dd></dl>

</div>
</div>
<a class="anchor" id="a7d92ccd7e51eb71624f07b4e917869aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* memory_pool_strdup </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A version of strdup() that allocates the duplicate to the memory pool rather than with malloc directly. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>Pointer to the string to duplicate</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A copy of str allocated in the memory pool </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
