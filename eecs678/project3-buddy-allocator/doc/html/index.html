<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Buddy Allocator: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Buddy Allocator
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Buddy Allocator Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><blockquote class="doxtable">
<h1>EECS 678 - Project 3 - The Buddy Allocator</h1>
<p></p>
</blockquote>
<h2>Introduction</h2>
<p>In this assignment, you must complete the buddy allocator. Most of the implementation has already been done for you.</p>
<p><b>A full description of the buddy algorithm can be found <a href="../../project3-description.pdf">here</a>.</b></p>
<h2>Installation</h2>
<p>To only build the buddy allocator use: </p><blockquote class="doxtable">
<p><code>$ make</code> </p>
</blockquote>
<p>To generate this documentation in HTML use:</p>
<blockquote class="doxtable">
<p><code>$ make doc</code> </p>
</blockquote>
<p>To clean the project use: </p><blockquote class="doxtable">
<p><code>$ make clean</code> </p>
</blockquote>
<h2>Usage</h2>
<p>To run the executable use: </p><blockquote class="doxtable">
<p><code>$ ./buddy &lt; test-files/test_sample1.txt</code> </p>
</blockquote>
<p>or </p><blockquote class="doxtable">
<p><code>$ ./buddy -i test-files/test_sample1.txt</code> </p>
</blockquote>
<h2>What to Implement</h2>
<h4>[Allocation]</h4>
<blockquote class="doxtable">
<p><code>void* buddy_alloc (int size);</code> </p>
</blockquote>
<p>On a memory request, the allocator returns the head of a free-list of the matching size (i.e., smallest block that satisfies the request). If the free-list of the matching block size is empty, then a larger block size will be selected. The selected (large) block is then splitted into two smaller blocks. Among the two blocks, left block will be used for allocation or be further splitted while the right block will be added to the appropriate free-list.</p>
<h4>[Free]</h4>
<blockquote class="doxtable">
<p><code>void <a class="el" href="buddy_8h.html#a961ef8a2fd9df43d50945100f172b97a">buddy_free(void *addr)</a>;</code> </p>
</blockquote>
<p>Whenever a block is freed, the allocator checks its buddy. If the buddy is free as well, then the two buddies are combined to form a bigger block. This process continues until one of the buddies is not free.</p>
<p>How to find buddy and check if the buddy is free? Suppose we have block B1 of order O, we can compute the buddy using the formula below.</p>
<blockquote class="doxtable">
<p><code>B2 = B1 XOR (1 &lt;&lt; O)</code> </p>
</blockquote>
<p>We provide a convenient macro <a class="el" href="buddy_8c.html#aae7263f0e40a1e0dfefa6f53652a4a05">BUDDY_ADDR()</a> for you.</p>
<h2>Testing</h2>
<p>Be sure you thoroughly test your program. We will use different test files than the ones provided to you. We have provided a simple test case to demonstrate how to write the test cases. We have also provided a testing script <code>runtests.sh</code> which will run all of your test files in the test-files directory. To execute all of your tests in that directory, simply use either:</p>
<blockquote class="doxtable">
<p><code>$ make test</code> </p>
</blockquote>
<p>or </p><blockquote class="doxtable">
<p><code>$ ./run_tests.sh</code> </p>
</blockquote>
<p>All test files must be located in the test-files directory and have the prefix "test_" (i.e. test_sample2.txt). The file test_sample2.txt has the following lines in it:</p>
<blockquote class="doxtable">
<p><code>a = alloc(44K)</code> <br />
 <code>free(a)</code> </p>
</blockquote>
<p>This test case allocates a 64 kilo-byte block of memory and assigns it to the variable 'a'. If the 'K' in the size argument is removed, then this call will only request 44 bytes. This test case then releases the block that is assigned to 'a' with the free command. Variable names can only be one character long, alphabetic letters.</p>
<p>Output must match exactly for credit. We have provided some sample output from our implementation in the test-files directory. All files that you wish to compare tests against should be located in the test-files directory and must match the name of its corresponding test file with the prefix "result_" instead of "test_". These result files should be manually created by hand. Nothing you add to the code should print to standard output by the time you submit the project.</p>
<h2>Grading</h2>
<p>10% per working test file we provide. We have 12 test files we use for grading so you may get up to a 120%.</p>
<p>Again, we have provided two test cases as examples of files we will use to grade your project, however we encourage you to create your own to test and discover various corner cases you may encounter. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
